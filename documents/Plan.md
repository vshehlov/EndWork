# План автоматизации тестирования веб-формы сервиса покупки туров интернет-банка
## 1. Перечень автоматизируемых сценариев
## Тестирование UI
### Позитивные сценарии (Happy Path)

**1. Покупка тура на вкладке "Купить" с главной страницы сервиса**

**1.1. Успешная покупка при оплате картой с валидным номером и достаточным количеством средств на счете**
1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить"
3. Заполнить все поля валидными данными карты с достаточным количеством средств на счете (например, Номер карты - 4444444444444441, Месяц - 09, Год - 24, Владелец - Popov Igor, CVC/CVV - 123)
4. Нажать кнопку "Продолжить
![mainpagepay](https://user-images.githubusercontent.com/67016228/97154970-ae762680-1785-11eb-8336-f1a9993d7fdf.jpg)

*Ожидаемый результат: В правом верхнем углу появляется сообщение "Успешно Операция одобрена банком"*
![paysuccess](https://user-images.githubusercontent.com/67016228/97157014-9358e600-1788-11eb-9579-455491b5aab0.jpg)


**1.2. Отказ в покупке при оплате картой с валидным номером и недостаточным количеством средств на счете**
1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить"
3. Заполнить все поля валидными данными карты с недостаточным количеством средств на счете (например, Номер карты - 4444444444444442, Месяц - 09, Год - 24, Владелец - Popov Igor, CVC/CVV - 123)
4. Нажать кнопку "Продолжить

*Ожидаемый результат: В правом верхнем углу появляется сообщение "Ошибка! Банк отказал в проведении операции"*
![payfalure](https://user-images.githubusercontent.com/67016228/97157033-99e75d80-1788-11eb-82e3-36c7083bb406.jpg)

**2. Покупка тура на вкладке "Купить в кредит" с главной страницы сервиса**

**2.1. Успешная покупка в кредит при оплате картой с валидным номером и достаточным кредитным лимитом**
1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить в кредит"
3. Заполнить все поля валидными данными карты с достаточным кредитным лимитом (например, Номер карты - 4444444444444441, Месяц - 09, Год - 24, Владелец - Popov Igor, CVC/CVV - 123)
4. Нажать кнопку "Продолжить
![mainpagecredit](https://user-images.githubusercontent.com/67016228/97158165-1f1f4200-178a-11eb-8e9e-574fb26ec951.jpg)

*Ожидаемый результат: В правом верхнем углу появляется сообщение "Успешно Операция одобрена банком"*
![creditsuccess](https://user-images.githubusercontent.com/67016228/97158600-ba181c00-178a-11eb-9156-3337f696e155.jpg)


**2.2. Отказ в покупке в кредит при оплате картой с валидным номером и недостаточным кредитным лимитом**
1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить в кредит"
3. Заполнить все поля валидными данными карты с недостаточным кредитным лимитом (например, Номер карты - 4444444444444442, Месяц - 09, Год - 24, Владелец - Popov Igor, CVC/CVV - 123)
4. Нажать кнопку "Продолжить"

*Ожидаемый результат: В правом верхнем углу появляется сообщение "Ошибка! Банк отказал в проведении операции"*
![creditfailure](https://user-images.githubusercontent.com/67016228/97158875-1844ff00-178b-11eb-8774-bb77ef115286.jpg)

## Проверка полей для ввода данных

Для тестирования полей для ввода данных необходимо выполнить следующие предусловия:
- пункты 1 и 2 из сценария 1.1 UI для формы "Оплата по карте" 
- пункты 1 и 2 из сценария 2.1 UI для формы "Кредит по данным карты"

Далее необходимо заполнить поля, нажать кнопку "Продолжить" и ожидать результат. 

### Все поля - пустые

После выполнения предусловий оставить все поля незаполненными и нажать кнопку "Продолжить"

*Данный случай является невалидным для всех полей формы (в этом случае возникают ошибки "Поле обязательно для заполнения")*

### Поле "Номер карты"

Поле "Номер карты" присутствует в обеих формах: "Оплата по карте" и "Кредит по данным карты" и допускает для ввода только цифры и их количество - 16.

После выполнения предусловий заполнить остальные поля валидными данными: Месяц - 09, Год - 24, Владелец - Popov Igor, CVC/CVV - 123 и нажать кнопку "Продолжить"

*Невалидные данные для поля "Номер карты" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения", всплывающее окно в правом верхнем углу "Ошибка! Банк отказал в проведении операции."):*
1. Пустое поле 
2. Номер карты содержит количество цифр менее 16
3. Номер карты не содержится в базе данных банка, например "5469444444444441"

### Поле "Месяц"

Данное поле принимает номер месяца в формате двух знаков, от 01 до 12, можно ввести только цифры.

После выполнения предусловий заполнить остальные поля валидными данными: Номер карты - 4444444444444441, Год - 24, Владелец - Popov Igor, CVC/CVV - 123 и нажать кнопку "Продолжить"

*Невалидные данные для поля "Месяц" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения", "Неверно указан срок действия карты"):*
1. Пустое поле
2. Поле содержит одну цифру (например, 1)
3. Поле содержит двузначное число более 12 (например, 20)
4. Поле содержит нулевое значение (например, 00)

### Поле "Год"

Данное поле принимает только цифры в формате двух последних цифр

После выполнения предусловий заполнить остальные поля валидными данными: Номер карты - 4444444444444441, Месяц - 09, Владелец - Popov Igor, CVC/CVV - 123 и нажать кнопку "Продолжить"

*Невалидные данные для поля "Год" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения", "Неверно указан срок действия карты", "Истёк срок действия карты"):*
1. Пустое поле
2. Поле содержит одну цифру (например, 1)
3. Поле содержит год ранее текущего (например, 19)
4. Поле содержит нулевое значение (например, 00)
5. Поле содержит год намного позднее текущего (например, 40)

### Поле "Владелец"
Данное поле принимает на вход фамилию и имя на английском языке.

После выполнения предусловий заполнить остальные поля валидными данными: Номер карты - 4444444444444441, Месяц - 09, Год - 24, CVC/CVV - 123 и нажать кнопку "Продолжить"

*Невалидные данные для поля "Владелец" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения"):*
1. Пустое поле
2. Поле содержит одно слово на английском языке (например, Popov)
3. Поле содержит три слова на английском языке (например, Popov Igor Petrovich)
4. Поле содержит русские буквы (например, Попов Игорь)
5. Поле содержит цифры (например, 5432 3232)
6. Поле содержит спецсимволы (например, #%№)


### Поле "CVC/CVV"

Данное поле принимает на вход только 3 цифры.

После выполнения предусловий заполнить остальные поля валидными данными: Номер карты - 4444444444444441, Месяц - 09, Год - 24, Владелец - Popov Igor и нажать кнопку "Продолжить"

*Невалидные данные для поля "CVC/CVV" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения"):*
1. Пустое поле
2. Поле содержит одну цифру (например, 1)
3. Поле содержит две цифры (например, 12)
4. Поле содержит три нуля (000)

## Тестирование API

Необходимо проверить через API банковские карты и их статусы в БД. 

Данные для карты со статусом APPROVED: Номер карты - 4444444444444441, Месяц - 09, Год - 24, Владелец - Popov Igor, CVC/CVV - 123
Данные для карты со статусом DECLINED: Номер карты - 4444444444444442, Месяц - 09, Год - 24, Владелец - Popov Igor, CVC/CVV - 123

Перечень тестируемых сценариев:
1. При оплате по карте 4444444444444441 (обращение к http://localhost:8080/api/v1/pay) ответ сервера - код 200 OK, статус карты APPROVED
2. При оплате по карте 4444444444444442 (обращение к http://localhost:8080/api/v1/pay) ответ сервера - код 200 OK, статус карты DECLINED
3. При отправке заявки на кредит по карте 4444444444444441 (обращение к http://localhost:8080/api/v1/credit) ответ сервера - код 200 OK, статус карты APPROVED
4. При отправке заявки на кредит по карте 4444444444444442 (обращение к http://localhost:8080/api/v1/credit) ответ сервера - код 200 OK, статус карты DECLINED

## 2. Перечень используемых инструментов с обоснованием выбора
1. Java 11 - универсальный язык, позволяющий работать на всех ОС и различном оборудовании за счет виртуальной машины, которая полностью контролирует безопасность и прерывает работу если что-то пошло не так (несанкционированный доступ и пр.)
2.  IntelliJ IDEA - среда разработки для различных языков, совместимая с различными инструментами и возможностью их комбинирования и настройки под конкретный случай.
3. Docker - для развертывания виртуальных контейнеров и запуске в них баз данных MySQL и PostgreSQL, а также сервисов банка на NodeJS 
4. JUnit5 - тестовый фреймворк, совместимый с JVM, содержит необходимые аннотации и assert’ы
5. Gradle - система сборки проекта. По сравнению с Maven, в Gradle проще подключать зависимости, меньше кода, гибкость системы.
6. Faker - система генерации случайных данных для тестов. Позволяет создать различные данные автоматически с учетом местоположения, а не придумывать данные и напрямую писать их в код.
7. Lombok - плагин для создания аннотаций, заменяющих значительное количество однообразных конструкторов, getters/setters и пр.
8. Selenide - фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver. Подключение веб-драйвера происходит автоматически, простое написание кода тестов
9. Allure Report - система репортинга. Простое подключение к тестам, возможность отслеживать данные на протяжении времени
10. Git - система контроля версий. Удобство, возможность одновременной параллельной разработки, есть интеграция с IntelliJ IDEA
 
## 3. Перечень и описание возможных рисков при автоматизации
1) Проблемы с запуском приложения, подключением БД;
2) Изменение структуры страницы (html, css) - недоступность css-селекторов для проверки;
3) Некорректность тестовых данных при работе с Faker;
4) Исходя из пунктов 1,2, 3 переоценка стоимости автоматизации и поддержания автотестов в сторону повышения.
 
## 4. Интервальная оценка с учётом рисков (в часах) 
- Разработка плана тестирования - 8 часов;
- Подготовка необходимых инструментов, написание кода автотестов - 64 часа;
- Подготовка отчетной документации, баг-репортов - 12 часов;
- Запас в виде 24 часов на непредвиденные обстоятельства.

## 5. План сдачи работ
- Готовность автотестов - 8 рабочих дней после утверждения плана и разрешения вопросов;
- Результат работы автотестов - документы по итогам тестирования (отчет по итогам тестирования + баг-репорты) - 3 рабочих дня ;
- Подготовка отчёта по автоматизации - 3 рабочих для после проведения всех работ.
